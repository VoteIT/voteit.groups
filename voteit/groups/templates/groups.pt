<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="view.macro('arche:templates/base_view.pt', 'arche:templates/inline.pt')"
      i18n:domain="voteit.groups">
<body>
<div metal:fill-slot="main-content">
    <h1 i18n:translate="">
        Showing
        <span tal:replace="len(context)" i18n:name="count">5</span>
        groups
    </h1>

    <tal:iterate repeat="group context.get_content(sort_on='title')">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-sm-8">
                        <h3 class="panel-title">
                            ${group.title} (${len(group.members)})
                        </h3>
                    </div>
                    <div class="col-sm-3">
                        <strong tal:condition="group.hashtag">${group.hashtag}</strong>
                    </div>
                    <div class="col-sm-1">
                        <a class="btn btn-default btn-xs pull-right"
                           tal:condition="request.has_permission('perm:Edit', group)"
                           href="${request.resource_url(group, 'edit')}"
                           i18n:translate="">Edit</a>
                    </div>
                </div>
            </div>
            <div class="list-group" tal:condition="group.members">
                <div class="list-group-item" tal:repeat="userid group.members">
                    <span tal:replace="structure request.creators_info([userid], portrait = False)" />
                </div>
            </div>
        </div>
    </tal:iterate>
</div>
</body>
</html>
